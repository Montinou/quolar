# Generated Artifacts Reference

Complete documentation of all artifacts generated by the test-ticket workflow.

---

## Artifact Overview

| Artifact Type | Location | Purpose |
|---------------|----------|---------|
| Test Analysis | `docs/test-analysis/{ticket-id}.md` | Requirements extraction and analysis |
| Test Plan | `docs/test-plans/{ticket-id}-test-plan.md` | Test scenarios and coverage mapping |
| Test Files | `automation/playwright/tests/{feature}/` | Executable Playwright test code |
| Page Objects | `automation/playwright/page-objects/` | Reusable page interaction classes |
| Git Branch | `test/{ticket-id}-automated-tests` | Version control for test changes |
| Pull Request | GitHub with linked Linear ticket | Code review and CI integration |

---

## Test Analysis Document

**Location:** `docs/test-analysis/{ticket-id}.md`

**Generated in:** Step 1 (Ticket Analysis)

**Contents:**
- Ticket summary (title, type, labels, branch)
- Sources analyzed (ticket, PR, code changes, Quoth, Exolar)
- Code changes summary with modified files
- Acceptance criteria extracted from ticket
- Test requirements (type, directory, page objects)
- Quoth patterns to follow
- Existing test coverage from Exolar
- Risks and edge cases identified

**Template:**
```markdown
# Test Analysis: {TICKET-ID}

## Ticket Summary
- **Title**: {title}
- **Type**: {feature|bug|api}
- **Labels**: {labels}
- **Branch**: {gitBranchName}
- **PR**: {pr-url if exists}

## Sources Analyzed
- [x] Linear ticket description
- [x] PR description: {summary}
- [x] Branch changes: {count} files modified
- [x] Quoth patterns: {patterns found}
- [x] Exolar coverage: {existing tests}

## Code Changes Summary
### Modified Files
- `src/components/Feature.tsx` - Main component
- `src/api/endpoint.ts` - API integration

### Key Implementation Details
{Summary of actual code changes}

## Acceptance Criteria
1. {criterion 1}
2. {criterion 2}

## Test Requirements
- **Test type**: {E2E UI|API Integration|Both}
- **Target directory**: {path}
- **Page objects needed**: {list}

## Quoth Patterns to Follow
- Pattern: {name} from {doc-id}

## Existing Test Coverage
- {test-1}: {status}

## Risks and Edge Cases
- {edge case 1}
- {edge case 2}
```

---

## Test Plan Document

**Location:** `docs/test-plans/{ticket-id}-test-plan.md`

**Generated in:** Step 3 (Test Planning)

**Contents:**
- Coverage matrix mapping ACs to test scenarios
- Test scenarios with steps and assertions
- Data requirements and fixtures
- Environment configuration
- Estimated execution time

**Template:**
```markdown
# Test Plan: {TICKET-ID}

## Coverage Matrix

| Acceptance Criteria | Test Scenario | Priority |
|---------------------|---------------|----------|
| AC1: {description} | TC1.1, TC1.2 | High |
| AC2: {description} | TC2.1 | Medium |

## Test Scenarios

### TC1.1: {scenario name}

**Type:** Happy Path
**Priority:** High

**Preconditions:**
- User is authenticated
- Feature flag enabled

**Steps:**
1. Navigate to {page}
2. Enter {data} in form
3. Click submit

**Expected Results:**
- Success message displayed
- Data saved to database
- User redirected to {page}

**Test Data:**
- User: `testuser@example.com`
- Input: `valid_value`

---

## Data Requirements

| Data Type | Source | Cleanup |
|-----------|--------|---------|
| Test user | Fixture | Auto-cleanup |
| Form data | Factory | N/A |

## Environment Configuration

- **Base URL**: `{preview-url}`
- **Backend**: `https://api-qa.attorneyshare.info/graphql`
- **Auth**: Stored in `.auth/`

## Estimated Duration

| Phase | Time |
|-------|------|
| Setup | 30s |
| Execution | 3-5m |
| Teardown | 10s |
| **Total** | ~5m |
```

---

## Test Files

**Location:** `automation/playwright/tests/{feature}/`

**Generated in:** Step 4 (Test Generation)

**Naming Convention:**
- `{feature}.spec.ts` - Main test file
- `{feature}.setup.ts` - Test setup/fixtures (if needed)
- `{feature}.data.ts` - Test data factory (if needed)

**Structure:**
```typescript
import { test, expect } from '@playwright/test'
import { FeaturePage } from '../../page-objects/FeaturePage'

test.describe('{Feature Name}', () => {
  let page: FeaturePage

  test.beforeEach(async ({ page: p }) => {
    page = new FeaturePage(p)
    await page.goto()
  })

  test('TC1.1: {scenario name}', async () => {
    // Arrange
    const testData = { ... }

    // Act
    await page.fillForm(testData)
    await page.submit()

    // Assert
    await expect(page.successMessage).toBeVisible()
  })

  test.fixme('TC1.2: {needs manual fix}', async () => {
    // AUTO-HEALING FAILED - requires manual investigation
  })
})
```

---

## Page Objects

**Location:** `automation/playwright/page-objects/`

**Generated when:** New pages are tested

**Naming Convention:**
- `{PageName}Page.ts` - Page object class
- Extends base `BasePage` if available

**Structure:**
```typescript
import { Page, Locator } from '@playwright/test'

export class FeaturePage {
  readonly page: Page
  readonly submitButton: Locator
  readonly successMessage: Locator

  constructor(page: Page) {
    this.page = page
    this.submitButton = page.locator('[data-testid="submit"]')
    this.successMessage = page.locator('.success-alert')
  }

  async goto() {
    await this.page.goto('/feature')
  }

  async fillForm(data: FormData) {
    // Fill form fields
  }

  async submit() {
    await this.submitButton.click()
  }
}
```

---

## Git Branch

**Naming:** `test/{ticket-id}-automated-tests`

**Examples:**
- `test/ENG-123-automated-tests`
- `test/ENG-456-user-login-tests`

**Branch lifecycle:**
1. Created from `main` during workflow
2. Commits added as tests are generated/healed
3. Pushed to origin before PR creation
4. Merged via PR approval
5. Deleted after merge (optional)

---

## Pull Request

**Created in:** Step 7 (PR Creation)

**Title format:** `test: automated tests for {ticket-id}`

**Labels:** `automated-tests`, `qa`, `e2e`

**Body sections:**
- Summary with ticket link
- Changes (new test files, docs, config)
- Test results table
- Coverage by acceptance criteria
- Auto-healing history
- How to run instructions
- Checklist

**Linked to:**
- Linear ticket (via PR link)
- CI workflow (triggered on push)
- Vercel preview (for preview testing)

---

## Directory Structure After Generation

```
project-root/
├── automation/
│   └── playwright/
│       ├── tests/
│       │   └── {feature}/
│       │       ├── {feature}.spec.ts
│       │       └── {feature}.data.ts (optional)
│       └── page-objects/
│           └── {PageName}Page.ts (if new)
├── docs/
│   ├── test-analysis/
│   │   └── {ticket-id}.md
│   └── test-plans/
│       └── {ticket-id}-test-plan.md
└── .github/
    └── workflows/
        └── ci.yml (updated if needed)
```

---

## Artifact Cleanup

Artifacts are generally kept for documentation purposes. If cleanup is needed:

```bash
# Remove test analysis for specific ticket
rm docs/test-analysis/{ticket-id}.md

# Remove test plan
rm docs/test-plans/{ticket-id}-test-plan.md

# Remove test files (caution: may break CI)
rm -rf automation/playwright/tests/{feature}/

# Delete branch (after PR merged)
git branch -d test/{ticket-id}-automated-tests
git push origin --delete test/{ticket-id}-automated-tests
```
